Struct Multidisc Optim (2012) 45:801–814 DOI 10.1007/s00158-011-0742-8

RESEARCH PAPER

Parameter free shape and thickness optimisation considering stress response
Saartje Arnout · Matthias Firl · Kai-Uwe Bletzinger

Received: 8 April 2011 / Revised: 9 November 2011 / Accepted: 10 November 2011 / Published online: 9 December 2011 c Springer-Verlag 2011

Abstract In the parameter free approach, FE-based data are used as design variables, such as nodal coordinates and nodal thickness. During shape and thickness optimisation, this approach provides much design freedom for a limited modelling effort. Stress results are, however, very sensitive to the local shape changes that can occur during parameter free optimisation. When stress results are used as response function, this irregularity can complicate the optimisation. As a solution, the Kreisselmeier-Steinhauser function for the stresses is introduced as a response function for parameter free shape optimisation. In this function, the local stress results are aggregated to obtain a global measure of stress in a structure. This measure can be used as an objective to reduce the overall stress in the structure or as a constraint to limit the stress in the structure to a maximum allowable value. As a result, the optimal structures are smooth and material efficient. Several examples are presented in this paper to illustrate the use of the parameter free design approach in combination with the stress response function. Keywords Shape and size optimisation · Parameter free optimisation · FE-based parameterization · Shell structures
S. Arnout (B) Department of Civil Engineering, K.U.Leuven, Kasteelpark Arenberg 40 - bus 2448, 3001 Heverlee, Belgium e-mail: saartje.arnout@bwk.kuleuven.be M. Firl · K.-U. Bletzinger Chair of Structural Analysis, Technische Universität München, Arcisstrasse 21, 80290 Munich, Germany M. Firl e-mail: matthias_firl@gmx.de K.-U. Bletzinger e-mail: kub@bv.tum.de

1 Introduction In recent years, increasing attention has been spent on optimal design of industrial components and structures. This attention is motivated from economical arguments that aim to reduce the cost or increase efficiency, or from ecological arguments for reducing the use of resources. Due to its very general and flexible formulation (Kegl and Brank 2006), structural optimisation is now widely used as a powerful design tool to obtain the optimal design (Bennet and Botkin 1984; Holzleitner and Mahmoud 1999; Lagaros et al. 2004). Structural optimisation can be formulated as a mathematical optimisation problem: min f (x) with xl x xu g(x) 0 (1)

x∈Rn

The objective function f (x) is minimised during the optimisation. The total volume (Lagaros et al. 2004; Lagaros and Papadopoulos 2006) or the strain energy (Kegl and Brank 2006; Lee and Hinton 2000; Tysmans et al. 2009) are often considered in the objective function. The vector x contains the design variables x j that can be related to the size, shape and topology of the structure. The optimal set of variables has to satisfy a number of constraints. The side constraints define a lower and upper bound xl and xu of the design variables. Behaviour constraints g(x) 0 can enforce limitations on stresses (Lagaros et al. 2004) or deflections (Wang et al. 2002) in multiple load combinations, or natural frequencies (Pedersen and Nielsen 2003), to ensure an adequate performance of the resulting structure. Several approaches can be applied to choose the design variables x. In general, the geometry of the structure is parameterised with Computer Aided Geometric Design

802

S. Arnout et al.

(CAGD) techniques (Farin 1990), as introduced by Braibant and Fleury (1984). Most parameterization techniques represent the boundary or the surface with a linear combination of basis functions (Arora 1997). Some of the parameters of the linear combinations are used as design variables x (Imam 1982). A good choice for the parameterization is crucial as it fixes the design space. Particular care is therefore needed when it is difficult to formulate a reasonable guess about the shape of the best solution, as discussed by Bletzinger et al. (2009a). In this paper, the parameter free optimisation approach (Bletzinger et al. 2010b; Le et al. 2011) is used for both shape and thickness design variables as an alternative to the CAGD parameterization. The goal of this approach is to allow as much design freedom as possible while considerably reducing the modelling effort. Therefore, data of the finite element (FE) mesh are chosen as design variables, such as nodal coordinates, nodal thickness, element thickness, etc. As a result, a large number of solutions is explored during optimisation. Regularisation and filtering techniques have been applied to ensure smooth and reliable results. When the aim is to minimise material use, the total volume is considered in the objective function. To avoid overloading of the material, stress constraints have to be added to the optimisation problem. As a result of this combination, the optimal structures are material efficient. However, stress results are very sensitive to the local shape changes that can occur during parameter free optimisation. This irregularity complicates the optimisation. As a solution, the Kreisselmeier-Steinhauser function is introduced as a response function, in which the stress field is aggregated to obtain a global measure of stress. This function can be used as a constraint to limit the stress in the structure to a maximum allowable value but it is also successfully applied as an objective to reduce the overall stress in the structure. In the following section, the parameter free approach is described. Next, the Kreisselmeier-Steinhauser function is introduced and the sensitivity analysis is discussed. Further, several examples are presented to illustrate the use of the parameter free approach in combination with the stress response function.

beads, although this would be necessary in the parameterised approach, since the selected shape parameterization determines the shape of the optimum. To avoid this preliminary choice, the parameter free approach is successfully used by Bletzinger et al. (2009a). The FE-based approach was used in the first experiments with shape optimisation (Zienkiewicz and Campbell 1973). These early experiments, however, disclosed some initial drawbacks. The most important disadvantage is that this approach results in large optimisation problems. Furthermore, if the nodal coordinates are chosen as design variables, the design updates can change the mesh without changing the shape of the structure, cf. Fig. 1. Therefore, the solution of the optimisation problem is non-unique. Moreover, the optimal structures are often not satisfactory, since the resulting boundaries and surfaces can be wiggly and irregular (Braibant and Fleury 1984). Recent research on computational techniques has surmounted the initial drawbacks of the parameter free approach. The progress of computer hardware has allowed the solution of large optimisation problems in reasonable time. Furthermore, the numerical problems associated with the parameter free approach can be reduced or avoided by regularisation techniques. In-plane regularisation ensures a robust and reliable mesh during the optimisation process and solves in this way the non-uniqueness. Out-of-plane

2 Parameter free optimisation In the parameter free approach, FE-based data are used as design variables, such as nodal coordinates, nodal thickness, element thickness etc. In this way, it provides a large design freedom with only a limited modelling effort, since there is no other model than the FE-model. This is especially important for problems for which no prior assumptions can be made about the optimal solution, such as bead topologies. It is impossible to predict the best shape for the

Fig. 1 Floating mesh: different suitable discretisations for the same shape (Bletzinger et al. 2009b)

Parameter free shape and thickness optimisation considering stress response

803

regularisation modifies the response gradients to obtain a smooth design update with limited local curvature. 2.1 In-plane regularisation The need for in-plane regularisation of the element mesh is caused by the non-uniqueness of the discretization. A surface can be represented by an infinite number of finite elements meshes. This is demonstrated in Fig. 1 for a hyperbolic paraboloid. A new variant can be constructed by moving only one node over the surface. For an accurate computation, a regular mesh without distorted elements is required. During parameter free shape optimisation, however, there is no control on mesh regularity since the nodes move independently. As a consequence, in-plane regularisation has to be used to preserve the mesh quality during the optimisation. A well-known technique for mesh regularisation is the Laplace regularisation. This technique attempts to find a mesh with square elements which all have the same area content. In general, this governing equation is solved iteratively by moving each node subsequently to the centre of gravity of its neighbouring nodes. The minimal surface regularisation (MSR) is a generalisation of the Laplace method and was introduced by Bletzinger et al. (2010b). In this technique, an artificial prestress field has to be prescribed to the elements which controls the mesh deformation without affecting the structural deformation due to the real loading (Firl et al. 2011, submitted for publication). Similar to the updated reference strategy (URS) for form finding (Wüchner and Bletzinger 2005), the technique attempts to find the location for the nodes such that the prescribed initial stress field is in equilibrium. With this approach, the elements can have different area contents and different shapes according to the prescribed prestress field. Additionally, the initial stress field is updated during the regularisation, such that an incompatible field can be adapted to a feasible one. This updating scheme is based on the deformations of the actual element geometry compared to the initial element geometry. The prestress is adapted in each element such that these deformations are as small as possible. This regularisation technique is also applied iteratively, by subsequently solving an approximation of the equilibrium equations of the structure loaded by the initial stress field. 2.2 Out-of-plane regularisation

functions f , on which the design update is based. These sensitivity fields suffer from non-smoothness due to the df discretization errors. The field d xdj , the derivatives of the disturbed function values f d w.r.t. a design variable x j can show a different behaviour compared to the exact derivatives df d x j . Therefore, the regularisation consists of filtering the sensitivities to produce a smooth field with a limited local d df curvature, aiming to restore d xf j out of d xdj . The filtering consist of a convolution of the numerical df computed gradient field d xdj with a filter function h(x j ). The
d smooth gradient field d xf j used for the computation of the design update is then stated as:

df ∼ = dx j

d fd ∗ h (x j ) = dx j

Rn

d fd (x j − τ )h(τ )dτ dx j

(2)

in which Rn is the n-dimensional domain of the filter function and τ represents a local variable of h in Rn . The filter function h(x j ) should be non-negative with Rn g(τ )dτ = 1. In the FE analysis, only discrete functions are available. The reformulation of the convolution integral reads as: df ∼ = dx j d fd ∗ h (x j ) = dx j d fd (x j − k)h(k)dk dx j (3)

k∈D

The domain D ⊆ Z (with Z the set of integers) is defined by the design variables. A similar filter technique is proposed by Shimoda et al. (2009). Le et al. (2011) apply a similar filter to the design variables rather than the sensitivities, to construct a smooth mesh out of the irregular mesh that is defined by the design variables. The shape of the filter function and the filter radius influence the result of the optimisation. If the filter function is constant in its domain, the final gradient value at one location will be equally influenced by each surrounding value inside the domain and the local curvature of the design update will be less than obtained by a linear filter. The smaller the filter radius, the smaller the features in the final structure. The choice of the filter function is considered as a design choice and, according to Bletzinger et al. (2010a), no natural principle exist which may guide the decision. Subsequent optimisations with a variation of the filter function, however, will help the designer to produce various structures with optimised behaviour. This use is demonstrated for a cylindrical roof by Bletzinger et al. (2010a).

3 The Kreisselmeier-Steinhauser function Out-of-plane regularisation is necessary during parameter free shape optimisation to obtain smooth design updates and consequently a smooth result. Moreover, the regularisation controls the local curvature of the result. The irregularities originate from the sensitivities of the smooth response 3.1 Motivation Since stress results consist by their nature of many localised results, it is not obvious which strategy should be used to

804

S. Arnout et al.

limit the stress during optimisation. In the size optimisation of discrete structures, such as trusses, the number of members might be small enough to constrain the stress of each member, as done by Pedersen and Nielsen (2003). The number of elements in a shell structure, however, is often large and adding one constraint for each Gauss point consequently leads to a huge number of constraints. In some cases, it might be possible to determine a small region in which the maximum stress will be located such that the number of constraints can be reduced. When the geometry changes during optimisation, however, it is impossible to predict which elements or Gauss points will undergo the largest stresses. Alternatively, the maximum stress in the structure can be constrained to the maximum allowable stress, e.g. Arnout et al. (2011). This maximum stress strategy has the advantage that only one stress constraint is added to the optimisation problem, however, the constraint is clearly discontinuous. If the constraint is active, the constraint gradient shows the influence of the design variables on the largest stress. The current design update will thus reduce the current largest stress, but it can increase the stress at another location. In this way, the constraint gradient changes significantly in every iteration. The risk of this kind of discontinuity is larger during an optimisation with the parameter free approach, since the changes to the geometry of the structure can be very localised. Such a small local change influences the stress field strongly and consequently, the stress response changes very irregular from iteration to iteration. If the stress response is used in the objective or constraint functions, this non-smoothness can cause problems because the computed search direction is not efficient. This discontinuity has been solved by Taylor and Bendsøe (1984) by adding a slack variable to the optimisation. Others, e.g. Haftka and Gürdal (1992), reduced the described problem by using several maximum constraints for different structural regions. Hinton et al. (1991) have combined the maximum stress constraint with several stress constraints in predefined points. Alternatively, the discontinuity can be avoided by replacing the maximum by an alternative continuous function that integrates the stress results over the structure. The concept is that there is still only one constraint, but all stresses in the structure contribute to its value in proportion with their size. As a consequence, the design update also accounts for the stresses close to the largest stress and the discontinuity due to the change of the location of the largest stress is avoided. Two functions are often used in this situation: the p-norm and the Kreisselmeier-Steinhauser (KS) function. Schumacher (2005) describes the problem of using the maximum stress strategy and proposes to use the p-norm. The KS function has been introduced in structural optimisation by Sobieszczanski-Sobieski (1991). The adjoint

sensitivities are available amongst others in Akgün et al. (2001). Qiu and Li (2010) show the equivalence between the p-norm and the KS function and conclude that the KS function is more adaptive for optimisation problems. Chang (1992) uses the KS function during the size optimisation of a wing structure. Similar size optimisation examples are solved by Martins and Poon (2005) and they observe that it is more efficient than using the maximum stress strategy. Moreover, they improve the KS function by adapting the parameters close to the optimum. París et al. (2010) use the KS function in topology optimisation. Their motivation to use the KS function is similar to ours, since the changes to the element densities, which are used as design variables in topology optimisation, are also localised and influence the stress field strongly. Based on these references, the KS function is preferred. 3.2 Function value and parameters The Kreisselmeier-Steinhauser function for the stresses is formulated as: f KS (σi , σ , ρ) = 1 ln ρ
N

exp ρ
i=1

σi σ

(4)

N with i=1 a summation over the N Gauss points in the domain and σi the stress in the i-th Gauss point. This stress can be any reference stress, such as the principal stress with the largest absolute value σ1 or the von Mises stress σVM . The stresses are normalised by the maximum allowable stress σ and ρ is a scalar parameter that determines the importance of the largest stresses amongst all σi . In some cases, it is appropriate to limit the absolute stress values. The function is then reformulated as:

f KS (σi , σ , ρ) =

1 ln ρ

N

exp ρ
i=1

σi σ

(5)

When using (4), negative stress values do not contribute to f KS if a positive σ is used. If the value for σ is negative, the largest negative stresses determine the value of the KS function. As a consequence, if a material is used for which the maximum allowable stress in tension and compression is different, two constraints should be added to the optimisation problem using (4) with the respective positive and negative σ . In contrast, (5) can be used if the material has the same stress limit in tension and compression. As an example, Fig. 2 shows three constraint functions σi (x) σ (i = 1, 2, 3) of the design variable x. In addition, the KS function for these constraints is shown for three values of ρ. The value of the KS function is always larger than the largest stress, i.e. f KS (σi , σ , ρ) maxi ( σi ). As can σ

Parameter free shape and thickness optimisation considering stress response
2.5 2 1.5 1 0.5 0

805

Le et al. (2010). Le et al. (2010) compute in each iteration s a constant multiplier cs : c =
s σis−1 σ ) s−1 f KS (σi , σ , ρ)

maxi (

(6)

where σis−1 is computed from iteration s − 1. The stress constraint is reformulated as:
0 2 4 x 6 8 10

Fig. 2 Influence of the parameter ρ on f KS (σi , σ , ρ). Value of (x) three constraint functions σiσ (full lines) of the design variable x. f KS (σi , σ , 1) (dotted), f KS (σi , σ , 5) (dash-dotted) and f KS (σi , σ , 10) (dashed)

s f KS

1 cs

or

s cs f KS

1

(7)

In this paper, this reformulation of the stress constraint is used, but the multiplier is computed with the current stress: maxi ( σi ) c = f KS (σis , σ , ρ)
s σs

(8)

be observed on the figure, the distance between f KS and maxi ( σi ) depends strongly on the value of ρ. The larger σ ρ is, the closer the KS function approximates the largest stress. The value of ρ also determines the region of influence and the steadiness of the function. For a large ρ, the value of the KS function is dominated by the largest stress values, so the effect of the function will be limited to the neighbourhood of these largest stresses. In addition, the KS function also approximates the discontinuity of maxi ( σi ), σ which introduces regions with high curvature and causes similar numerical problems as using the discontinuous constraint. When reducing ρ, the influence of the KS function over the structure increases, since more stresses contribute significantly to its value. In general, it is observed that a reasonable range of ρ is between 1 and 100. This is in accordance with Martins and Poon (2005), who report that ρ = 50 is usually a reasonable value. When stresses are constrained during an optimisation, it is generally required that σi 1 (i = 1, . . . , N ), which is σ replaced by maxi ( σi ) 1 or f KS (σi , σ , ρ) 1. However, σ due to the approximation of the function value, the feasible region defined by the KS function is not the same as in the maximum stress strategy (Martins and Poon 2005). As an example, Fig. 2 demonstrates that the constraints f KS (σi , σ , 10) 1 and maxi ( σi ) 1 have almost the σ same feasible region. In contrast, the feasible region of f KS (σi , σ , 5) 1 is notably smaller and if ρ is reduced to 1, no feasible design can be found. Using the KS function as a constraint is thus conservative since f KS (σi , σ , ρ) is always larger than maxi ( σi ). It is possible to restrict the σ safety margin by choosing ρ sufficiently high. This solution is not advantageous, since the global effect of the KS function on the structure is lost for a high value of ρ. Therefore, a normalisation procedure is introduced according to

Using this multiplier, the normalized KS function value is consistent with the maximum stress constraint. Hence, the problematic discontinuity of the maximum stress approach is avoided. The maximum allowable stress σ is generally defined by the material. Nevertheless, its value has a significant influence on the behaviour of the KS function. If the value of σ is small compared to the current stresses σi in the structure, the value of the exponential function tends to infinity. If the current stresses in the structure are much smaller than the allowable stress, the fractions σi are very small. Conseσ quently, the value of the KS function will be similar for all sets of design variables and thus become useless. This effect is demonstrated in Fig. 3. It can be concluded that the best results are obtained if the stresses σi are similar to σ . This can be obtained by choosing a feasible initial structure or by restarting the optimisation with an adapted σ after some iterations. It is concluded that if the KS function is used as an objective function, the value of σ can be used as a parameter and
2.5 2 1.5 1 0.5 0 0 2 4 6 8 10

x

Fig. 3 Influence of the parameter σ on f KS (σi , σ , ρ). f KS (σi , σ , ρ) of the design variable x for σ = 100 (dark), 200, 500 and 1000 (light gray)

806

S. Arnout et al.

should be chosen such that it is close to the real stresses in the structure. Additionally, the value for ρ should be rather low to obtain a global effect of the optimisation. Alternatively, if this response function is used as a constraint function, the value of σ has to be the real maximum allowable value for the stress. Using this response function as a constraint is conservative since f KS (σi , σ , ρ) is always at the safe side. To avoid this, the normalisation procedure can be used. 3.3 Sensitivity analysis In this paper, the conjugate gradient method is used as the optimisation method. Constraints are considered with the augmented Lagrangian method. Since the optimisation method uses gradient information to determine the search direction, it is necessary to compute the derivatives of the objective and constraint functions, including the KS function. 3.3.1 The adjoint exact semi-analytic approach The state variables of the mechanical model, in this case the displacements U, are dependent on the design variables x. The response functions of the optimisation problem are dependent on the design variables both directly and through the state variables. The derivative of the response function f (x, U(x)) with respect to a design variable x j can thus be established by the chain rule: ∂f ∂ f ∂U df = + dx j ∂x j ∂U ∂ x j (9)

tive for each design variable x j can be computed easily by introducing λ in the combination of (9) and (11): df ∂f ∂ f −1 = + K dx j ∂x j ∂U = ∂f + λ T P∗ ∂x j ∂P ∂K − U ∂x j ∂x j (13)

During the sensitivity computation, the partial derivatives ∂K and ∂ x j are replaced by a finite difference approximation. This semi-analytic approach is preferred since the implementation of the analytical derivative of the stiffness matrix is problematic: it can hardly be prepared for sophisticated structural elements (e.g. enhanced strain elements) in existing codes. To avoid the known numerical problems with the semi-analytic approach (Barthelemy and Haftka ∂K 1990), the approximation of ∂ x j is corrected with the exact semi-analytic method as introduced by Bletzinger et al. (2008). This method is based on the findings of Cheng and Olhoff (1993) but avoids the need for a different implementation for each element.
∂P ∂x j

3.3.2 The sensitivity of the Kreisselmeier-Steinhauser function The above adjoint approach is applied to the KS function. From the formulation of f KS (σi , σ , ρ) in (4), it is clear that only the stresses σi are dependent on the design and state variables. Their sensitivities with respect to the design variable x j can be stated as: ∂σi ∂σi ∂U dσi = + dx j ∂x j ∂U ∂ x j = ∂σi ∂σi −1 ∗ K P + ∂x j ∂U (14)

The derivatives of the state variables can be computed by derivation of the discretized equations of equilibrium: KU = P ∂K ∂P ∂U =− U+ K ∂x j ∂x j ∂x j
P∗

(10) (11)

Equation (14) is used in the complete derivative of the KS function: d f KS = dx j = +
i

Equations (9) and (11) can be combined and solved d for the requested sensitivities d xf j by the adjoint or the direct approach (Kirsch 1993). Due to the large number of design variables in optimisation problems with the parameter free approach, the adjoint approach is more efficient. The sensitivity computation begins with the solution of the system ∂f T K λ= ∂U
T

1 · exp ρ σi i σ 1 · exp ρ σi i σ exp ρ 1 σi · i exp ρ σ +
i

exp ρ
i

σi σ σi σ

1 dσi σ dx j 1 ∂σi σ ∂x j

exp ρ
i

σi σ

1 ∂σi −1 ∗ K P σ ∂U exp ρ
i

(12)

=

σi σ

1 ∂σi σ ∂x j (15)

for the adjoint variable λ. This system has to be solved only once for every response function f . Afterwards, the deriva-

exp ρ

σi σ

1 ∂σi σ ∂U

K−1 P∗

Parameter free shape and thickness optimisation considering stress response
∂σ The partial derivative ∂ x ij is approximated by the finite difference method, so the computation of the first term is straight forward. The second term defines the adjoint system. Since the term K−1 P∗ is the same for every Gauss point, it is not a part of the summation and the adjoint system is:

807

(a)

KT λ =
i

exp ρ

σi σ

1 ∂σi σ ∂U

(16)

The partial derivative ∂σi at the right hand side is computed ∂U analytically. An efficient implementation of these formulas is required to take the advantage of the adjoint semi-analytic methods.

(b)

4 Examples In the following section, the KS function is used as a response function in various examples considering shell structures. The structures are discretised with ReissnerMindlin assumed strain shell elements with linear kinematics and linear elastic isotropic material. 4.1 Catenary This example describes the optimisation of an arch loaded by dead load. The initial shape of the arch is half a circle with a radius of 5 m. The depth of the arch is 1 m, the thickness is 0.1 m and the bottom nodes are hinged. The arch is made of a material with a Young’s modulus of 210 GPa, a zero Poisson coefficient and a density of 7900 kg/m3 . The arch is discretised by shell elements. During the optimisation, the coordinates of the FE-nodes can move perpendicular to the shell surface without any bounds. The KS function is minimised, the considered stresses are top the von Mises stresses in the top plane σVM,i with parameter values σ = 2 MPa and ρ = 10. No mesh regularisation algorithm is used for this example. A linear sensitivity filter with a circular base with a radius of 2 m is used to obtain smooth results. O PTIMISATION PROBLEM ⎧ x : nodal coordinates ⎨ top f (x) : f KS (σVM,i , 2 MPa, 10) ⎩ g(x) : Within 37 iterations, the expected solution is obtained: a catenary arch as presented in Fig. 4. The maximal value of the von Mises stress in a Gauss point in the top plane is reduced from 8.93 MPa to 0.46 MPa. The catenary arch could also be obtained by minimising the strain energy of this structure. However, since the strain energy is a global

Fig. 4 Shape optimisation of an arch under dead load: von Mises stress [Pa] in the top plane (a) before and (b) after the optimisation

measure by definition, this optimisation result shows the strength of the KS function: the possibility to obtain a global shape change based on local analysis results. Moreover, this optimisation also clearly illustrates the advantages of the parameter free approach. Obtaining the same result with the parameterised approach is only possible if a CAGD parameterization is constructed that can represent both a circle and a catenary arch. 4.2 Cantilever beam In this example, the shape optimisation of a cantilever beam is considered. The geometry of the problem is presented in Fig. 5. The length of the beam is 20 m, the width is 0.1 m and the initial height 2 m. The beam is modelled by shell elements. Node A, B and C are loaded by a vertical force, its value is 162.5 N in node A and C and 325 N in node B. The material of the beam has a Young’s modulus of 210 GPa and a zero Poisson coefficient. During the optimisation, the nodes indicated with a dot on Fig. 5 can move vertically with a maximum of 0.8 m. By changing the shape, the KS function is minimised while

Fig. 5 Cantilever beam: initial geometry

808

S. Arnout et al.

the mass m of the structure is not allowed to increase more than 5%. The considered stresses are the principal stresses top in the top plane with the largest absolute value σ1,i . The value for σ is chosen to be 0.02 MPa, which is close to the stress in the initial structure. Equation (5) is used such that both the positive and negative values are taken into account. The symmetry of the results shows that this approach is effective. It is not necessary to use mesh regularisation for this example. A linear sensitivity filter with a circular base with a radius of 2 m is used to obtain smooth results. O PTIMISATION PROBLEM ⎧ x : vertical position of selected nodes ⎪ ⎪ ⎨ top f (x) : f KS (σ1,i , 0.02 MPa, ρ) ⎪ ⎪ g(x) : |xinitial − xfinal | 0.8 m ⎩ m final 1.05m initial The optimisation has been performed for two values of the parameter ρ. In Fig. 6, the evolution of the shape and the first principal stress can be seen for both optimisation runs. In both cases, the maximum principal stress in a Gauss point in the top plane is reduced from 0.13 MPa to 0.06 MPa. It is clear that, as expected, the higher value of ρ causes the design updates to be more localised in the neighbourhood of the largest stress. This has two consequences. First, since the current largest stress is considered almost individually, the convergence is slower. The optimisation with ρ = 10 needs 32 iterations to converge, while the optimisation with the lower ρ only needs 24 iterations. Second, since the available step size is divided over a smaller number of components concentrated around the current largest stress, the local shape changes are larger. The final structure of both cases is similar, but the result for the higher ρ is indeed more pronounced. In both cases, the free end has reached its minimum allowed height in the final structure.

The height of the clamped end is limited by the mass constraint and has increased to 3.2 m for ρ = 10 and to 3.0 m for ρ = 1. 4.3 Cantilever pipe In the previous examples, the KS function was used as the objective function, so the exact stress value was not important. In this example, the mass of a cantilever pipe is minimised while the stress is constrained to a specific value. Therefore, it is important that the final maximum stress is close to the selected value. It will be shown that the normalisation procedure is effective for any value of ρ. The example considers the shape optimisation of a pipe structure. The pipe has a length of 20 m and an initial circular cross section with a diameter of 2 m. The structure is made of steel (E = 210 GPa and ν = 0.3) and has a wall thickness of 1 cm. At one side, the pipe is clamped. At the free end, each node is loaded by a point load p of 7.5 kN. During the optimisation, the nodes can move perpendicular to the surface of the pipe. The mass is minimised, so it can be expected that the diameter of the pipe will be reduced. However, two stress constraints are added to limit the von Mises stress resp. in the top and bottom plane. In both constraints, the absolute value of the von Mises stress in each Gauss point is considered with the KS function. The maximum allowable stress σ is 150 MPa. In this example, Laplace regularisation is used in combination with a linear sensitivity filter with a circular base with a radius of 0.75 m. Since the stress constraints are expected to be active at the optimum, they are formulated as equality constraints f KS (σi , σ , ρ) = 1.00. As explained in Section 3.2, there is a margin between the KS function and the largest stress. This margin can be reduced by increasing ρ, however, this changes the influence region of the KS function. The normalisation procedure as described in Section 3.2 guarantees

Fig. 6 Cantilever beam: top evolution of the design and σ1,i [Pa] for ρ = 1 (left) and ρ = 10 (right)

Parameter free shape and thickness optimisation considering stress response

809

(a)

(b)

(c) (d) (e)
Fig. 7 Cantilever pipe: (a) initial geometry and final structure with von Mises stress [Pa] in the top plane after optimisation for minimal mass, without normalisation with (b) ρ = 10 and (c) ρ = 20 and with normalisation with (d) ρ = 10 and (e) ρ = 20

that the value of the final stresses will be close to the maximum allowable stress without the need for a high value of ρ. To demonstrate these properties, the optimisation is repeated with and without normalisation for two values of ρ. O PTIMISATION PROBLEM ⎧ x : nodal coordinates ⎪ ⎪ ⎨ f (x) : m top ⎪ g(x) : f KS (σVM,i , 150 MPa, ρ) = 1.00 ⎪ ⎩ bot f KS (σVM,i , 150 MPa, ρ) = 1.00

The resulting structures corresponding to four optimisation runs are presented in Fig. 7 and summarized in Table 1. When a low value of ρ is used without normalisation, as in case (a), the largest stress in the final structure is much lower than the imposed maximum stress σ . In case (b), ρ is increased, and consequently, the stresses reach a level closer to the maximum allowed value. The KS function proves in that way to be a good tool to control the stresses in the conceptual design stage. Additionally, the normalisation procedure is used for case (c) and (d), resp. with a high and a low value of ρ. The final stresses are indeed very close to σ . Comparing both results, it is clear that the parameter ρ has only a limited influence on the final structure, similar to the example shown in Section 4.2. The mechanism to make the structure stiffer is for each case the same as for the cantilever beam in Section 4.2. The diameter of the free end is reduced, while the clamped end has a larger elliptical shape. The remark should be made that the diameter of the free end can probably be reduced further without increasing the stress at the clamped end. Due to the competing gradients of the objective and constraints, however, the augmented Lagrangian method converges to the shown structures. Nevertheless, the final dimensions of the pipe, and therefore also its mass, are clearly inversely proportional to the stress level allowed by the constraint function.

4.4 Catenary for minimal mass In Section 4.1, the optimisation of a circular arch under self weight for minimal stress is described. The result, a catenary arch, is now optimised for mass. Since the structure is only loaded by self weight, reducing the height of the structure also reduces the loading. Of course, the solution with minimal mass is a flat plate. However, the stresses in

Table 1 Cantilever pipe: results of the optimisation for minimal mass without normalisation with (a) ρ = 10 and (b) ρ = 20 and with normalisation with (c) ρ = 10 and (d) ρ = 20

Case Objective Normalisation ρ σ m
bot max(σVM,i )

a m no 10 [MPa] [kg] [MPa] [MPa] [m] [m] [m]
top

b m no 20 150 7791 119.25 124.43 1.76 2.11 1.51 82

c m yes 10 150 6888 155.10 151.15 1.34 1.83 1.53 67

d m yes 20 150 6751 151.66 143.57 1.30 1.80 1.53 102

150 10703 48.95 48.51 1.75 3.32 2.04 112

max(σVM,i ) Free end r Clamped end rvert Clamped end rhor Iterations

810

S. Arnout et al.

that solution are very high due to bending. Therefore, the optimal solution will be again a catenary and the height will be in between the original catenary and the flat plate, depending on the value of the maximum allowable stress. In Fig. 8, three results of the optimisation for minimal mass with stress constraints are presented together with the extremes of optimal KS function and minimal mass. To obtain smooth results, Laplace regularisation has been used

in combination with two subsequent linear filters with a circular base with a radius of resp. 2 m and 3 m. During the mass minimisation, two stress constraints are considered that limit the von Mises stress in top and bottom plane with ρ = 30. The value of the maximum allowable stress σ is varied to 1.00, 1.35 and 1.70 MPa. As expected, the catenary shape appears in each solution and its height is inversely proportional to σ . The maximum value of the von Mises stress in the Gauss points in the top plane is within the constraint tolerance of the maximum allowed stress, resp. 1.02, 1.39 and 1.76 MPa. O PTIMISATION PROBLEM ⎧ x : nodal coordinates ⎪ ⎪ ⎨ f (x) : m ⎪ g(x) : ⎪ ⎩ f KS (σVM,i , σ , 30) bot f KS (σVM,i , σ , 30)
top

(a)

1.00 1.00

(b)

(c)

It must be emphasised that these solutions are not intermediate iterations of one optimisation with minimal mass without constraints. This would be the case if the shape was parameterised with the height as the only design variable. When minimising the mass of this structure with the parameter free approach, however, all nodes move inwards to reduce the mass by reducing the curvature. Only when a stress constraint becomes active, some of the nodes are pushed outwards again, such that the shape remains sufficiently curved and the maximum allowable stress is not exceeded. As a consequence, the shapes (b) to (d) will not occur as intermediate solutions during an optimisation without stress constraints. 4.5 Thickness The parameter free approach can also be applied for the optimisation of the thickness field. Although the resulting thickness field might not be feasible for construction, it will support the understanding of the structural behaviour. Moreover, it can serve as a basis to construct an efficient CAGD thickness parameterization for a more detailed optimisation in the next design stage. 4.5.1 Kresge auditorium A first example considers the thickness optimisation of the Kresge auditorium, previously considered by Firl (2010). In that work, the shape of the auditorium, originally a sphere segment, was optimised for minimal strain energy. The resulting shape is presented in Fig. 9. In this paper, each nodal thickness of the above optimized shell is considered as a design variable for an additional optimisation. The structure is loaded by self weight and a

(d)

(e)

(a)-(d)

(e)

Fig. 8 Optimal shape and von Mises stress [Pa] in the bottom plane for (a) minimal KS value, for minimal mass with (b) σ = 1.00 MPa, (c) σ = 1.35 MPa, (d) σ = 1.70 MPa and for (e) minimal mass without constraints

Parameter free shape and thickness optimisation considering stress response

811

stresses expected in the top of the structure are limited with a fourth constraint considering the stresses in the remaining elements of the structure. In all four stress constraints, the maximal stress σ is 10 MPa with ρ = 25. A linear filter with a circular base with a radius of 2.5 m is used. O PTIMISATION PROBLEM ⎧ x : nodal thickness ⎪ ⎪ ⎪ f (x) : m ⎪ ⎪ ⎪ ⎪ g(x) : 0.03 m x 0.10 m ⎪ ⎪ ⎨ top f KS (σ1,i , 10 MPa, 25) top ⎪ ⎪ f KS (σ1, j , 10 MPa, 25) ⎪ ⎪ ⎪ top ⎪ ⎪ f KS (σ1,k , 10 MPa, 25) ⎪ ⎪ ⎩ top f KS (σ1,l , 10 MPa, 25)

Fig. 9 Kresge auditorium: (Firl 2010)

geometry after shape optimisation

snow load of 4.5 kN/m2 . The material has a Young’s modulus of 30 GPa, a Poisson coefficient of 0.2 and a density of 2400 kg/m3 . The thickness of the shell is constrained between 0.03 and 0.10 m. The aim is to minimise the mass. It is assumed that the maximum stress will occur at the corners. Therefore, three KS stress constraints are defined for each corner region by considering the first principal stress top in the top plane σ1,i of the elements in this region. The use of regional constraints ensures a proper limitation of the three independent maxima. The corner regions contain 96 elements each and are shown on Fig. 10. Since a change in the nodal thickness only influences a limited neighbourhood, only the nodes inside a corner region are considered in the sensitivity analysis of the respective constraints, i.e. it is assumed that the thickness in a node at one corner has no influence on the stress at another corner. As presented in Fig. 10, the three nodes at each corner are hinged. Therefore, stress concentrations appear in the four corner elements. As a consequence, the stresses in these elements are not considered in the constraints and their element thickness is fixed to the maximal thickness. The compression

1.00, i ∈ C1 1.00, j ∈ C2 1.00, k ∈ C3 1.00, l ∈ D

The thickness distribution after 100 iterations is presented in Fig. 11a. The mass of the structure is reduced more than 50%, from 454 to 212 tons. In the upper part of the shell, the initial thickness of 0.10 m is reduced to the

(a)

(b)

Fig. 10 Kresge auditorium: boundary conditions, elements with fixed maximal thickness (dark gray) and corner regions C1 , C2 and C3 (light gray). The remaining elements are gathered in a region D

Fig. 11 Kresge auditorium: (a) thickness distribution [m] and (b) first principal stress [Pa] in the top plane after the size optimisation for minimal mass

812

S. Arnout et al.

constrained, but due to the limited amount of bending, it has similar values as the stresses in the top plane. 4.5.2 L-shaped cantilever The second example of thickness optimisation considers an L-shaped cantilever plate made of steel (E = 210 GPa and ν = 0.3). The original geometry of the plate is shown in Fig. 12a. The shape of this structure was optimised for minimal strain energy by Firl (2010). The result of this optimisation is presented in Fig. 12b. The height of the beads is determined by move limits. Figure 13 (left) shows the thickness and the von Mises stress distribution of the result of the shape optimisation. It can be observed that the shape with constant thickness has four large stress concentrations. Further changes to the shape would not reduce this concentrations, but the thickness of the plate can still be optimised. Therefore, an optimisation is now performed with the nodal thickness as design variable. The thickness can vary between 0.1 and 1 mm. In the first optimisation, the objective function is the KS function for the von Mises stress in the top plane with ρ = 25 and σ = 100 MPa under the same load case as presented on Fig. 12a. The mass is constrained to 101% of its original value. The resulting thickness and stress distribution are shown in figure 13 (middle). It is clear that the stress concentrations are successfully reduced by increasing

(a)

(b)

Fig. 12 L-shaped cantilever: (a) initial and (b) final structure of the shape optimisation for minimal strain energy

minimal thickness of 0.03 m. At the supports, the maximal thickness of 0.10 m is reached in a larger region than the four predefined elements. Due to the preceding shape optimisation, the upper part works in membrane state. Since the constraint is initially far from active at this location, the thickness can be reduced significantly, while also reducing the self weight. At the supports, the bending stresses prevail and are reduced by increasing the thickness. The first principal stress in the top plane after optimisation is presented in Fig. 11b. It is clear that the stress is effectively constrained since the principal stress in the Gauss points ranges from 10.31 MPa in compression to 8.97 MPa in tension after optimisation. The principal stress in the bottom plane was not

Fig. 13 Thickness distribution [mm] (top) and von Mises stress [MPa] in the top plane (bottom) for the structure after shape optimisation (left), after thickness optimisation for minimal KS function (middle) and for minimal mass (right)

Parameter free shape and thickness optimisation considering stress response

813

Fig. 14 Thickness distribution [mm] after thickness optimisation for minimal KS function with filter radius of 1 m (left), 2 m (middle) and 4 m (right)

the thickness at these locations. The value of maxi ( σi ) is σ reduced from 1.21 to 0.56 and resulting structure is much more uniformly stressed than the initial structure. The mass has decreased slightly from 238.65 to 237.41 kg. O PTIMISATION PROBLEM ⎧ x : nodal thickness ⎪ ⎪ ⎨ top f (x) : f KS (σVM,i , 100 MPa, 25) ⎪ ⎪ g(x) : 0.1 mm x 1.0 mm ⎩ m final 1.01m initial Alternatively, a solution could be requested that uses the material more efficient. Therefore, the objective and the constraint are swapped. The mass is minimised while the KS function with ρ = 25 and σ = 150 MPa is constrained. The final thickness and stress distribution are presented in Fig. 13 (right). The mass is successfully reduced from 238.65 to 65.62 kg and the maximum value of the von Mises stress in a Gauss point in the top plane of the structure is 152.16 MPa. It is clear that the largest thickness (0.75 mm) occurs in the same place as after the optimisation for minimal KS function. The stress field, however, shows more concentrations than before. O PTIMISATION PROBLEM ⎧ x : nodal thickness ⎪ ⎪ ⎨ f (x) : m ⎪ g(x) : 0.1 mm x 1.0 mm ⎪ ⎩ top f KS (σVM,i , 150 MPa, 25)

of maxi ( σi ) for these structures is 0.52, 0.56 and 0.59 after σ optimisation with a filter radius of resp. 1 m, 2 m and 4 m. This shows that for this example, small features improve the performance of the structure.

5 Conclusions In this paper, the parameter free approach is used in combination with the Kreisselmeier-Steinhauser function to account for stress response during the optimisation. Using such an integration of the stress results is necessary, since the stress field is very sensitive to the local shape updates that can occur during optimisation. From the examples, it is clear that the KS function is a practical tool to limit the stress in the final structure. The margin between the KS function and the largest stress can not be ignored but can be controlled by a normalisation procedure. The parameter ρ determines the region of influence of the function. The Kreisselmeier-Steinhauser function is applied successfully for both shape and size optimisation.
Acknowledgments This work was prepared during a research stay of the first author at the T.U. München. This research stay has been facilitated by the Research Foundation – Flanders (FWO). The first author is also a PhD. fellow of FWO. The financial support of FWO is gratefully acknowledged.

1.0 References
Akgün M, Haftka R, Wu K, Walsh J, JH G (2001) Efficient structural optimization for multiple load cases using adjoint sensitivities. AIAA J 39(3):511–516 Arnout S, Lombaert G, Degrande G, De Roeck G (2011) The optimal design of a barrel vault in the conceptual design stage. Comput Struct. doi:10.1016/j.compstruc.2011.10.013 Arora J (ed) (1997) Guide to structural optimization. No 90 in ASCE manuals and reports on engineering practice. ASCE, New York

The results presented in Fig. 13 are obtained by using a linear filter with a circular base with a radius of 2 m. To demonstrate the influence of the filter radius, the thickness optimisation for minimal KS function is repeated for a smaller and a larger filter radius. For each case, the thickness distribution after 50 iterations is presented on Fig. 14. It can be observed that a length scale is introduced in the design which is proportional with the filter radius. The value

814 Barthelemy B, Haftka R (1990) Accuracy analysis of the semianalytical method for shape sensitivity calculation. Mech Struct Mach 18(3):407–432 Bennet M, Botkin JA (1984) Structural shape optimization with geometric description and adaptive mesh refinement. AIAA J 23(1):458–464 Bletzinger KU, Firl M, Daoud F (2008) Approximation of derivatives in semi-analytical structural optimization. Comput Struct 86:1404–1416 Bletzinger KU, Firl M, Linhard J, Wüchner R (2009a) Optimization of bead topologies for shell structures. In: 8th World congress on structural and multidisciplinary optimization. Lisbon, Portugal Bletzinger KU, Linhard J, Wüchner R (2009b) Extended and integrated numerical form finding and patterning of membrane structures. J Int Assoc Shell Spat Struct 50(1):35–49 Bletzinger KU, Firl M, Fischer M (2010a) Parameter free shape design of thin shells: efficient and effective, parallel solution techniques for very large design problems. In: 2nd international conference on engineering optimization. Lisbon, Portugal Bletzinger KU, Firl M, Linhard J, Wüchner R (2010b) Optimal shapes of mechanically motivated surfaces. Comput Methods Appl Mech Eng 199:324–333 Braibant V, Fleury C (1984) Shape optimal design using B-splines. Comput Methods Appl Mech Eng 44:247–267 Chang K (1992) Optimality criteria methods using K-S functions. Struct Optim (4):213–217 Cheng G, Olhoff N (1993) New method of error analysis and detection in semi-analytical sensitivity analysis. In: Rozvany G (ed) Optimization of large structural systems, vol 1 and 231, pp 361– 383 Farin G (1990) Curves and surfaces for computer aided geometric design, 2nd edn. Computer Science and Scientific Computing, Academic Press, San Diego Firl M (2010) Optimal shape design of shell structures. Phd thesis, Chair of structural analysis, Technische Universität München Haftka R, Gürdal Z (1992) Elements of structural optimization. Solid mechanics and its applications, vol 11. Kluwer Academic Publishers, Dordrecht, The Netherlands Hinton E, Rao N, Ozakca M (1991) An integrated approach to structural shape optimization of linearly elastic structures. Part I: general methodology. Comput Syst Eng 2(1):27–39 Holzleitner L, Mahmoud K (1999) Structural shape optimization using MSC/NASTRAN and sequential quadratic programming. Comput Struct 70:487–514 Imam M (1982) Three-dimensional shape optimization. Int J Numer Methods Eng 18(5):661–673 Kegl M, Brank B (2006) Shape optimization of truss-stiffend shell structures with variable thickness. Comput Methods Appl Mech Eng 195(19–22):2611–2634 Kirsch U (1993) Structural optimization. Springer

S. Arnout et al. Lagaros N, Papadopoulos V (2006) Optimum design of shell structures with random geometric, material and thickness imperfections. Int J Solids Struct 43:6948–6964 Lagaros N, Fragiadakis M, Papadrakakis M (2004) Optimum design of shell structures with stiffening beams. AIAA J 42(1):175–184 Le C, Norato J, Bruns T, Ha C, Tortorelli D (2010) Stress-based topology optimization for continua. Struct Multidisc Optim 41(4): 605–620 Le C, Bruns T, Tortorelli D (2011) A gradient-based, parameter-free approach to shape optimization. Comput Methods Appl Mech Eng 200:985–996 Lee S, Hinton E (2000) Dangers inherited in shells optimized with linear assumptions. Comput Struct 78:473–486 Martins J, Poon M (2005) On structural optimization using constraint aggregation. In: Proceedings of the 6th World congress on strucutral and multidisciplinary optimization. Rio de Janeiro, Brazil París J, Navarrina F, Colominas I, Casteleiro M (2010) Stress constraints sensitivity analysis in structural topology optimization. Comput Methods Appl Mech Eng 199:2110–2122 Pedersen N, Nielsen A (2003) Optimization of practical trusses with constraints on eigenfrequencies, displacements, stresses, and buckling. Struct Multidisc Optim 25:436–445 Qiu G, Li X (2010) A note on the derivation of global stress constriants. Struct Multidisc Optim 40:625–628 Schumacher A (2005) Optimierung mechanischer strukturen. Springer, Berlin Shimoda M, Iwasa K, Azegami H (2009) A shape optimization method for the optimal free-form design of shell structures. In: 8th World congress on structural and multidisciplinary optimization. Lisbon, Portugal Sobieszczanski-Sobieski J (1991) A technique for locating function roots and for satisfying equality constraints in optimization. NASA TM-10403 NASA LaRC Taylor J, Bendsøe M (1984) An interpretation for min–max structural design problems including a method for relaxing constraints. Int J Solids Struct 20(4):301–314 Tysmans T, Adriaenssens S, Wastiels J (2009) Shape optimization of small span textile reinforced cementitious composite shells. In: Proceedings of the international association for of shell & spatial structures symposium. Valencia, Spain Wang D, Whang W, Jiang J (2002) Truss shape optimization with multiple displacements constraints. Comput Methods Appl Mech Eng 191:3597–3612 Wüchner R, Bletzinger KU (2005) Stress-adapted numerical form finding of pre-stressed surfaces by the updated reference strategy. Int J Numer Methods Eng 64:143–166 Zienkiewicz O, Campbell J (1973) Shape optimization and sequential linear programming. In: Gallagher R, Zienkiewicz O (eds) Optimum structural design. Wiley, New York, chap 7, pp 109–126

